{% extends "sectionbase.html" %}

{% block content %}

<section id="dynamic">
<h2>Dynamically Modifying SVG</h2>

<p>Since we can now use JavaScript code to modify SVG images, we can do that work anywhere we want in our code. In particular, we can draw things as the result of a user event, the same way we have modified the HTML page in the past.</p>

<p>For example, we can include a <code class="html">&lt;button></code> on our page, along with the empty container for an SVG image:</p>

{{ quoted_code('_sources/dynamic-page.html') }}

<p>Then in our <code class="js">setup</code> function, we can create {{raph}} paper object and connect the button's click event. We'll use the <code class="js">paper</code> variable later in another function.</p>

{{ quoted_code('_sources/dynamic1.js') }}

<p>Finally, we can respond to the button click, and use a variable so we draw something slightly different each time.</p>

{{ quoted_code('_sources/dynamic2.js') }}

<p>The variable <code class="js">radius</code> starts at 20 and decreases by 3 each time the function <code class="js">more</code> runs.</p>

<p>You can <a href="{{rellink}}files/dynamic-page.html">test that page</a> if you want: a circle should be drawn each time you click the button. Here's what it looked like for me after a few clicks:</p>

{{ figure('dynamic-result', 'Dynamic SVG after a few button clicks', extension='png', referenced=False) }}

<p>The point here is that you can draw on the paper object when it is first created (probably in your <code class="js">setup</code>) function, but also any other time you have JavaScript code running, such as in response to a user event. This will let us create pages where we dynamically create images for the user.</p>

</section>

<section id="curves">
<h2>Lines and Curves</h2>

<p>It's possible to draw lines and curves in images with the <code class="js">paper.path()</code> function, but the way needs some explanation. The <code class="js">paper.path()</code> takes one argument: an SVG <dfn>path string</dfn> which is a very compact way to specify a bunch of information about curves and lines.</p>

<p>We can start by creating our paper and drawing a simple line from (50,20) to (390,30) like this:</p>

{{ quoted_code('files/paths.js', line_start=12, line_end=15, dedent=2) }}

<p>The path string here is <code class="js">'M50,20 L390,30'</code> which says &ldquo;move (<code class="js">M</code>) to the point (50,20) and draw a straight line (<code class="js">L</code>) to (390,30).</p>

<p>If you'd like to see the result (along with the other paths drawn here), see the <a href="#fig-paths.result">figure below</a>. This line is red (as you should be able to guess from the <code class="js">.attr()</code> call, with apologies to any colour-blind readers), and is labelled &ldquo;p1&rdquo;.</p>

<p>Remember that (0,0) is in the upper-left, so the &ldquo;start&rdquo; of the line at (50,20) is the left end, and (390,30) is the right (and slightly lower) end.</p>

<p>Several of these can be combined to make a multi-segment line:</p>

{{ quoted_code('files/paths.js', line_start=17, line_end=18, dedent=2) }}

<p>This path starts at (50,40) and has straight line segments from there to (260,10), then (280,40), and finally (390,40). It is green and labelled &ldquo;p2&rdquo; <a href="#fig-paths.result">below</a>.
</p>

<p>You can see that the path string is made up of several &ldquo;commands&rdquo; that need a point: &ldquo;move to (50,40)&rdquo; is written <code class="js">'M50,40'</code> and &ldquo;draw a line to (260,10)&rdquo; is written <code class="js">'L260,10'</code>. The path string is a series of these commands that will be used to draw the path.</p>

<p class="draft">needs to be finished. Until then, here's the rest of the code that generates the paths below.</p>

{{ quoted_code('files/paths.js', line_start=19, line_end=38, dedent=2) }}











<aside>Remembering all of the details here and being able to draw curves off the top of your head isn't realistic. If you can draw straight lines without looking anything up, you're probably in good shape.</aside>

<p>After all of that, here's the resulting SVG that was drawn:</p>

{{ figure('paths-result', 'Result of path experiments', extension='svg', referenced=False) }}

</section>

{% endblock %}
